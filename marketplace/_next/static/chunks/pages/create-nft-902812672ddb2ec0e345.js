(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{513:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x}});var r=t(809),o=t.n(r),c=t(5893),s=t(6265),a=t(2447),i=t(7294),u=t(241),l=t(7616),p=t(387),d=t(5241),f=t(1163),g=t(2484),h=t.n(g),m=t(2025),v=t(1692);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var b=(0,d.create)("https://ipfs.infura.io:5001/api/v0");function x(){var e=(0,i.useState)(null),n=e[0],t=e[1],r=(0,i.useState)({price:"",name:"",description:""}),s=r[0],d=r[1],g=(0,f.useRouter)();function y(){return(y=(0,a.Z)(o().mark((function e(n){var r,c,s,i,u,l,p,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("NFTMarketplace onDrop"),console.dir(n),r=document.getElementById("file"),console.dir(r),c=r.files[0],e.prev=5,e.next=8,b.add(c,{progress:function(e){return console.log("received: ".concat(e))}});case 8:s=e.sent,i="https://ipfs.infura.io/ipfs/".concat(s.path),t(i),e.next=22;break;case 13:for(e.prev=13,e.t0=e.catch(5),console.log("Error uploading file: ",e.t0),u=document.getElementById("file"),l=new DataTransfer,p=function(e){document.getElementById("dropCanvas").toBlob(function(){var n=(0,a.Z)(o().mark((function n(r){var c,s,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=new File([r],"g"+e+".png",{type:"image/png",lastModified:(new Date).getTime()}),n.next=3,b.add(c,{progress:function(e){return console.log("received: ".concat(e))}});case 3:s=n.sent,a="https://ipfs.infura.io/ipfs/".concat(s.path),t(a),document.getElementById("preview").style.display="none",document.getElementById("dropCanvas").style.display="block",console.log("Added "+a);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),"image/png")},d=0;d<1;d++)p(d);u.files=l.files,console.log(u.files);case 22:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function e(n){var r,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.target.files[0],console.log("!!!!! onChange going to call client.add"),e.prev=2,e.next=5,b.add(r,{progress:function(e){return console.log("received: ".concat(e))}});case 5:c=e.sent,s="https://ipfs.infura.io/ipfs/".concat(c.path),t(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error uploading file: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function j(){return O.apply(this,arguments)}function O(){return(O=(0,a.Z)(o().mark((function e(){var t,r,c,a,i,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.name,r=s.description,c=s.price,console.log("!!!!! uploadToIPFS going to call client.add"),console.log("fileURL: "+n),t&&r&&c&&n){e.next=5;break}return e.abrupt("return");case 5:return a=JSON.stringify({name:t,description:r,image:n}),console.log("json: "+a),e.prev=7,e.next=10,b.add(a);case 10:return i=e.sent,u="https://ipfs.infura.io/ipfs/".concat(i.path),e.abrupt("return",u);case 15:e.prev=15,e.t0=e.catch(7),console.log("Error uploading file: ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})))).apply(this,arguments)}function k(){return(k=(0,a.Z)(o().mark((function e(){var n,t,r,c,a,i,d,f,y,w,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.description,e.next=3,j();case 3:return t=e.sent,r=new(h()),e.next=7,r.connect();case 7:return c=e.sent,a=new u.Q(c),i=a.getSigner(),d=l.vz(s.price,"ether"),f=new p.CH(m.I,v.Mt,i),e.next=14,f.getListingPrice();case 14:return y=(y=e.sent).toString(),e.next=18,f.createToken(t,d,{value:y});case 18:return w=e.sent,console.log("Transaction "),console.dir(w),e.next=23,w.wait();case 23:b=n.split("--").pop(),g.push("/?"+b);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.jsx)("div",{className:"flex justify-center",children:(0,c.jsxs)("div",{className:"w-1/2 flex flex-col pb-12",children:[(0,c.jsx)("input",{id:"assetName",placeholder:"Asset Name",className:"mt-8 border rounded p-4",onChange:function(e){return d(w(w({},s),{},{name:e.target.value}))}}),(0,c.jsx)("textarea",{id:"assetDescription",placeholder:"Asset Description",className:"mt-2 border rounded p-4",onChange:function(e){return d(w(w({},s),{},{description:e.target.value}))}}),(0,c.jsx)("input",{placeholder:"Asset Price in Eth",className:"mt-2 border rounded p-4",onChange:function(e){return d(w(w({},s),{},{price:e.target.value}))}}),(0,c.jsx)("div",{onDrop:function(e){return y.apply(this,arguments)},id:"dropContainer",style:{display:"none"},className:"mt-2 border rounded p-4",children:"Drop A File Here"}),(0,c.jsx)("input",{id:"file",type:"file",name:"Asset",className:"my-4",onChange:function(e){return x.apply(this,arguments)}}),n&&(0,c.jsx)("img",{id:"preview",className:"rounded mt-4",width:"350",src:n}),(0,c.jsx)("canvas",{id:"dropCanvas"}),(0,c.jsx)("button",{onClick:function(){return k.apply(this,arguments)},style:{backgroundColor:"#E94B3B"},className:"font-bold mt-4 bg-pink-500 text-white rounded p-4 shadow-lg",children:"Create NFT"})]})})}},7096:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-nft",function(){return t(513)}])},7005:function(){},6937:function(){},6784:function(){},8795:function(){}},function(e){e.O(0,[277,380,977,248,774,888,179],(function(){return n=7096,e(e.s=n);var n}));var n=e.O();_N_E=n}]);