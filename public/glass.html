<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <base href="https://playaml.github.io/nft-dashboard-template/Ventus/examples/desktop/"></base>
        <title>Welcome to the Coin Computer</title>
        <meta name="viewport" content="width=1224">

        <link href='../../../DragDropInteractions/css/normalize.css' rel='stylesheet'  />
        <link href='../simple/simple.css' rel='stylesheet'  />
        <link href='desktop.css' rel='stylesheet'  />
        <link href='../../dist/ventus.css' rel='stylesheet'  />

        <link href='browseralert.css' rel='stylesheet'  />

        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,300,400" rel="stylesheet" type="text/css" />

        <!-- TodoMVC App styles -->
        <link href='terminal/css/base.css' rel='stylesheet'  />
        <link href='https://fonts.googleapis.com/css?family=Arvo:400,400italic,700,700italic' rel='stylesheet'  />

         <!-- Terminus App styles -->
        <link href='terminal/css/base.css' rel='stylesheet'  />
        <link href='terminal/css/terminus.css' rel='stylesheet'  />
        <link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic,700italic' rel='stylesheet'  />

	<link rel="shortcut icon" href="https://your.cmptr.cloud:2017/favicon.ico" type="image/x-icon">
	<link rel="icon" href="https://your.cmptr.cloud:2017/favicon.ico" type="image/x-icon">

    	<!-- script src="engine.io.js"></script>
    	<script src="browserver-client-master/browserver.js"></script-->

        <!-- Video App 
        <link href="player/video-js.css" rel="stylesheet"  />
        <script src="player/video.js"></script>
	-->
        <script type="text/javascript" src="vendor/modernizr.js"></script>
	<script>
		var pos = 50;
		var num = 1;
		parent.postMessage("Here","*");
                if (window.location.search.length > 0)
		  window.addEventListener("message", function(event) {
		    console.log("index: Hello from " + event.data);
		    if (event.data.startsWith("-"))
			return console.log("Remove " + event.data.substr(1) + 
			((document.getElementById(event.data.substr(1)).parentElement).parentElement).parentElement.remove());
		    if (document.getElementById(event.data))
			return console.log("Goodbye "+event.data);
		    else {
			document.getElementById("app-container").innerHTML = 
				'<div class="' + event.data + '" id="' + event.data + '">' +
				'<iframe allowtransparency="true" style="border: none;" width="1280" height="4800" scrolling="no" src="https://dev.meetbeek.com:8443/?torrentId=' + event.data +'"></iframe></div>' + 
 				document.getElementById("app-container").innerHTML;

				
			wm.createWindow.fromElement(document.getElementById(event.data),{
				title: 'Rental Request '/* + event.data*/,
				x: (pos += 60),
				y: pos,
				width: 400,
				height: 250,

				events: {
					closed: function() {
						this.destroy();
					}
				}
			})
			.open();
		    }
		});
		else
		  window.addEventListener("message", function(event) {
		    console.log("index: Hello Got event: ");
		    console.dir(event.data);
		    if (typeof event.data == 'string' && event.data.startsWith('{ "docId": '))
		    {
                      try {
                        console.log("TOP: " + window.top.location)
		        var top = new String(window.top.location);
		        if (!top.startsWith("https://linux-box.cmptr.cloud/"))
		          parent.postMessage(event.data, '*');
                      } catch (error) { 
			console.log(error); 
			parent.postMessage(event.data, '*');
		      }
		    }
		    if (event.data.imagetype) {
                      var targetFrame = $('#marketplace')[0];
                      targetFrame.contentWindow.postMessage(event.data, '*');
                      try {
                        console.log("TOP: " + window.top.location)
		        var top = new String(window.top.location);
		        if (!top.startsWith("https://linux-box.cmptr.cloud/"))
		          parent.postMessage(event.data, '*');
                      } catch (error) { 
			console.log(error); 
			parent.postMessage(event.data, '*');
		      }
		    }

		    if (typeof event.data === ImageData) {
		        console.log("Hello from Image data" + event.data);
                        var targetFrame = $('#sidebar')[0];
                        targetFrame.contentWindow.postMessage(event.data, '*');
		    }

   		    if (typeof event.data === 'string' && event.data.startsWith('{ "document": ')) {
                      obj = JSON.parse(event.data);
                      market_frame = document.getElementById('marketplace').contentWindow.document;
                      market_frame.getElementById("assetDescription").innerHTML = "\n\n\n\n--" + obj.document;
		    }

		    if (event.data.event && event.data.event  === "network") {
		        console.log("Hello from network" + event.data);
                        var targetFrame = $('#sidebar')[0];
                        targetFrame.contentWindow.postMessage(event.data, '*');
                        targetFrame = $('#c64')[0];
                        targetFrame.contentWindow.postMessage(event.data, '*');
		    }
		    if (typeof event.data === 'string' && 
		      (event.data == "step5" || event.data.startsWith("sidebar-"))) {
		        console.log("firsttime: Hello from " + event.data);
                        var targetFrame = $('#sidebar')[0];
                        targetFrame.contentWindow.postMessage(event.data, '*');
		    }
		  });
	</script>
    </head>
    <body unselectable="on">
		<iframe allowtransparency="true" style="position:fixed; top:35px; left:0px; bottom:0px; right:0px; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden; " src="https://playaml.github.io/nft-dashboard-template/DragDropInteractions/sidebar.html" id="sidebar"></iframe>
		<!--iframe allowtransparency="true" style="position:fixed; top:135px; left:0px; bottom:0px; right:0px; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden; " src="DragDropInteractions/sidebar.html"></iframe-->
        <div class="apps" id="app-container" style="display:none" unselectable="on">
            <!-- TodoMVC App example with Backbone -->

	    <div class="buttonbar">
                <button class="button create-button">Buy Cloud Computing</button>
                <button id="sell" class="button expose-button">Sell Cloud Computing </button>
            </div>

            <div class="todo-app">
                <header class="todo-app-header">
                    <input class="todo-app-new" placeholder="What needs to be done?" autofocus>
                </header>
                <section class="todo-app-main">
                    <input class="todo-app-toggle-all" type="checkbox">
                    <!--<label for="toggle-all">Mark all as complete</label>-->
                    <ul class="todo-list"></ul>
                </section>
            </div>


            <div class="v86-app">
		<!--iframe allowtransparency="true" style="border: none;" width="1280" height="4800" scrolling="no" src="header.html"></iframe-->
		<!--iframe allowtransparency="true" style="border: none;" width="1280" height="250" scrolling="yes" src="rindex.htm"></iframe-->
            </div>

		
            <div class="v86-app-pc">
                <!--iframe allowtransparency="true" style="border: none;" width="680" height="480" id="marketplace" src="https://coin.computer/create-nft.html"></iframe-->
                <iframe allowtransparency="true" style="border: none;" width="680" height="480" id="marketplace" src="oasis/create-nft.html"></iframe>
                <!--iframe allowtransparency="true" style="border: none;" width="680" height="480" src="v86/app.html"></iframe-->
            </div>

            <script type="text/template" id="item-template">
                <div class="view">
                    <input class="toggle" type="checkbox" <%= completed ? 'checked' : '' %>>
                    <label><%- title %></label>
                    <button class="destroy"></button>
                </div>
                <input class="edit" value="<%- title %>">
            </script>

            <!-- Terminus App example -->

            <div class="terminal-app"></div>
            <script type="text/javascript" src="terminal/terminus.min.js"></script>
            <script type="text/javascript" src="terminal/commands/testcommands.js"></script>
            <script type="text/javascript" src="terminal/commands/vendor/three.js"></script>
            <script type="text/javascript" src="terminal/commands/vendor/supertags.js"></script>
            <script type="text/javascript" src="terminal/commands/shapecommands.js"></script>

            <!-- Video Player App 

            <div class="player-app">
                <video class="video-js vjs-default-skin" controls preload="auto" width="635" height="264" poster="player/oceans-clip.jpg" data-setup="{}">
                    <source src="player/oceans-clip.mp4" type='video/mp4' />
                </video>
            </div>
   	    -->

            <!-- About App -->
            <div class="about-app">
		<!--iframe allowtransparency="true" style="border: none;" width="680" height="480" src="chrome-extension://knldjmfmopnpolahpmmgbagdohdnhkik/FullscreenForm/index.html"></iframe-->
		<!--iframe allowtransparency="true" style="border: none;" width="680" height="480" src="http://localhost:47080/cakeshop/"></iframe-->
                <!--iframe allowtransparency="true" style="border: none;" width="680" height="510" id="c64" src="viciious.html"></iframe-->
                <iframe allowtransparency="true" style="border: none;" width="680" height="510" id="c64" src="/nft-dashboard-template/marketplace"></iframe>

                <!--iframe allowtransparency="true" style="border: none;" width="680" height="510" id="c64" src="https://auth.playagame.cloud/helloworld"></iframe-->
                <!--h1>Desktop</h1>
                <h2>HTML5 & CSS3 Window Manager Experiment</h2>

                <button class="expose-button">Try Exposé</button>
                <p>or <strong>right-click</strong> to activate it</p>

                <div class="copyright">
                    <p>Copyright (c) 2012 Ramón Lamana</p>
                    <p class="vendor">
                        Basejs by A. Matías Quezada.<br/>
                        Video.js by Steve Heffernan and Zencoder Inc.
                    </p>
                </div-->
            </div>
         </div>

            <!-- Coinbasae App -->
            <div class="coinbase-app">
		<iframe allowtransparency="true" style="border: none;" width="6800" height="4800" src="http://localhost:47080/cakeshop/"></iframe>
                <h1>Desktop</h1>
                <h2>HTML5 & CSS3 Window Manager Experiment</h2>

                <button class="expose-button">Try Exposé</button>
                <p>or <strong>right-click</strong> to activate it</p>

                <div class="copyright">
                    <p>Copyright (c) 2012 Ramón Lamana</p>
                    <p class="vendor">
                        Basejs by A. Matías Quezada.<br/>
                        Video.js by Steve Heffernan and Zencoder Inc.
                    </p>
                </div>
            </div>
         </div>

        <!-- Ventus Loader Screen -->

        <div id="loading-screen" unselectable="on">
            <section>
                <div class="content">
                    <header> 
                        <h1 style="font-family:'Ubuntu', sans-serif;">W3B GLASS</h1>
                    </header>
                    <p><img src="../../../img/loader.gif" /> Loading...</p>
                </div>
            </section>
        </div>

        <div class="browser-overlay">
            <div class="wrapper">
                <h2>This experiment has only been tested on <strong>Chrome</strong> and <strong>Safari</strong> browsers!</h2>
                <i class="icon-chrome" style="font-size: 50px; color: white; float: right;"></i>
                <p>This means we cannot guarantee that everything will be displayed properly on your browser. Sorry.</p>
                <small><a href="#" class="close-button">Continue anyway &gt;</a></small>
            </div>
        </div>

        <!-- Ventus -->
        <script type="text/javascript" src="vendor/jquery.js"></script>
        <script type="text/javascript" src="vendor/handlebars.js"></script>
        <script type="text/javascript" src="ventus/ventus.js"></script>
        <script type="text/javascript" data-main="todo/main.js" src="vendor/require.js"></script>

        <script type="text/javascript" src="desktop.js"></script>
	<script src="cachep2p.min.js"></script>
	<script src="init.js"></script>
    </body>
</html>
